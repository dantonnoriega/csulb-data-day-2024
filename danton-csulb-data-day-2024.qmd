---
title: "Hacking Your Way to a Diversified Portfolio"
subtitle: "Live Coding in R and Exploring ETF APIs"
author: "<b>Danton Noriega-Goodwin</b>"
date: "March 23, 2024"
format: 
  revealjs:
    logo: img/long-beach-data-science-csun-logo-300px.png
    footer: "Data Data at the Beach 2024"
    include-in-header: 
      text: |
        <style>
        .v-center-container {
          display: flex;
          justify-content: center;
          align-items: center;
          height: 90%;
        </style>
---

## About Me 

:::: {.columns .v-center-container}

::: {.column width="40%"}
![](img/danton-profile.png){width="400px"}
:::

::: {.column width="60%"}
- **Danton Noriega-Goodwin**  
  Staff Data Scientist, Apple
- **PhD in Public Policy & Economics**  
  Duke University (2019)
- **MS in Applied Statistics**  
  Cal State Long Beach (2011)
:::

::::

# Breakout Session

## Overview

. . .

- Posit Cloud
- Goals & Motivation
- Problem & Solution
- Approach
- Hack & Code!

## ‚ö†Ô∏è First Things First... {.center}

. . .

### ‚òÅÔ∏è Posit Cloud

‚úÖ Make a Posit Cloud account  
  [https://tinyurl.com/dantondd24](https://tinyurl.com/dantondd24)

## Learning Goals

Experience with, and exposure to, the following

. . .

- R Programming
- Browser Developer View (Chrome & Safari)
- APIs
- Mutual and Exchange Traded Funds (ETFs)

# Motivation

## Personal Finance

- Maximize Annual Roth IRA Contribution
- General Portfolio Diversification (`AAPL -> ETFs`)

. . .

### Research Goal

Select the smallest set of ETFs (or Mutual Funds) that achieves

1. Diversification
2. Minimal cost
3. Balanced Risk

## Problem

ETF websites are *purposefully* annoying.

. . .

- Cumbersome to access ETF portfolios (holdings) data
- Impossible to do basic analysis and comparisons
- Make you pay to access additional information

## Solution {.center}

*Find a website with an API that is easy to reverse engineer.*

# üëÄ [etf.com](https://www.etf.com)

## Approach

Design an R program that

* Takes ETF tickers (e.g. `VOO`) as inputs
* Fetches ETF holdings data from the API
* Processes and returns a nested dataframe of holdings data
  * e.g. dataframe with columns  
    `ticker<chr>, data<list>`

## üöß Cloudflare ‚Äì `403 Forbidden` üò≠ {.center}

(Practicing with Github files instead)


## ‚òÅÔ∏è Posit Cloud

* Create Posit Cloud account and join [Workspace **481345**](https://posit.cloud/spaces/481345)
  * Invitation Link: [https://tinyurl.com/dantondd24](https://tinyurl.com/dantondd24)
* Start a *New Project* from **_Template for Danton's Breakout Session_**
  * Blue Rectangle, Top Right > Click "New Project" > Select "New Project from Template"
* Once project deploys, open R Script:  
  `get-etf_gh_files.R`

# ü§ò Let's Rock üé∏ {.center}

## Hack

### Browser *Web Inspector*

- Safari
  - *Preferences (`cmd+.`) > Advanced > "Show Web Features for Web Developers"*
  - Menu *Develop > Show Web Inspector (`cmd+alt+i`)*
- Chrome
  - Menu *View > Developr > View Source (`cmd+alt+i`)*

## Hack

### Inspect `etf.com/voo`

- Go to [etf.com/VOO](https://www.etf.com/VOO)
  - *View Source / Show Web Inspector* (`cmd+alt+i `)
  - Go to *Network*
- Click *Holdings*
  - Scroll down to *View All*
- Web Inspector filter to *"XHR/Fetch"*
  - Find `holdings`
  - Right-click *"Copy as cURL"*
- Paste in Posit Cloud!

## Code

- Posit Cloud: https://posit.cloud/spaces/481345/
- Open R scripts
  - `get-etf_fund_holdings.R`
  - `get-etf_gh_files.R`
 
### üßë‚Äçüíª Let's code.

# Resources

* Find everything from today!  
  [**üë©üèΩ‚Äçüíª github.com/dantonnoriega/csulb-data-day-2024**](https://github.com/dantonnoriega/csulb-data-day-2024)
* Stay in touch!  
  [**üåê danton.codes**](http://danton.codes)